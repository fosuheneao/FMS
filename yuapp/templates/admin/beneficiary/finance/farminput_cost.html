{% extends "base_auth_dash.html" %}
{% load static %}

{% load currency_filters %}
{% block content %}
<div class="row">
  <div class="card shadow-lg border-0 rounded-4">
      <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-3">
              <h4 class="fw-bold text-primary">
                  <i class="fa fa-address-card me-2"></i> Farm Input: <span class="text-danger">Costing</span>
              </h4>
              <a href="{% url 'request_cash' %}" class="btn btn-primary btn-lg text-white">
                  <i class="fa fa-money"></i> Farm Input Request
              </a>
          </div>
          <hr />

          <div class="table-responsive mt-3">
              <table id="myTable" class="table table-hover align-middle">
                  <thead class="table-primary">
                      <tr>
                          <th>Date</th>
                          <th>Farm Input</th>
                          <th>Source</th>
                          <th>Quantity</th>
                          <th>Unit Cost</th>
                          <th>Total Cost</th>
                          <th>Distributed by</th>
                          <th>Expires on</th>
                          <th>Actions</th>
                      </tr>
                  </thead>
                  <tbody>
                      {% for finput in farm_input_assigned_list %}
                      <tr>
                          <td>{{ finput.distribution_date|date:"d-m-Y" }}</td>
                          <td>{{ finput.farm_input.farm_input.inputcategory.name }}</td>
                          <td>{{ finput.farm_input.farm_input.inputdealer.name }}</td>
                          <td>{{ finput.quantity }}</td>
                          <td><strong>{{ finput.farm_input.farm_input.cost_per_unit|currency }}</strong></td>
                          <td><strong>{{ finput.total_cost|currency }}</strong></td>
                          <td>{{ finput.distributed_by }}</td>
                          <td>{{ finput.farm_input.farm_input.expiry_date|date:"d-m-Y" }}</td>
                          <td>
                              <a href="{% url 'farm_input_assigned_detail' finput.id %}" class="btn btn-info btn-sm text-white">
                                  <i class="fa fa-binoculars"></i> View
                              </a>
                          </td>
                      </tr>
                      {% endfor %}
                  </tbody>
                  <tfoot class="table-danger">
                      <tr>
                          <td colspan="3" class="fw-bold">Total Input Cost</td>
                          <td class="fw-bold">{{ total_quantity }}</td>
                          <td></td>
                          <td class="fw-bold">{{ total_cost|currency }}</td>
                          <td colspan="3"></td>
                      </tr>
                  </tfoot>
              </table>
          </div>
      </div>
  </div>
</div>

{% endblock %}